# Централизованное хранилище Configuration Management Database (CMDB) с многопоточным HTTP API для управления данными в микросервисной архитектуре

[![C++](https://img.shields.io/badge/C%2B%2B-20-blue.svg)](https://en.wikipedia.org/wiki/C%2B%2B20)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

## Описание

Данный проект представляет собой HTTP-сервер для управления Configuration Management Database (CMDB). Сервер предоставляет RESTful API для взаимодействия с CMDB, позволяя выполнять операции по управлению конфигурационными элементами (CI) и связями между ними.

В основе проекта лежит библиотека CMDB, реализованная на C++, которая обеспечивает хранение и управление данными. HTTP-сервер, построенный с использованием Boost.Beast, принимает запросы и делегирует обработку данных в CMDB через слой DataStore.

## Структура проекта

Проект имеет следующую структуру:


```
cmdb_service/
├── main.cpp
├── README.md
├── CMDB/
│   ├── CI.cpp
│   ├── CI.h
│   ├── CMDB.cpp
│   ├── CMDB.h
│   ├── Relationship.cpp
│   └── Relationship.h
├── Server/
│   ├── Controller/
│   │   ├── RequestHandler.cpp
│   │   └── RequestHandler.h
│   ├── Model/
│   │   ├── DataStore.cpp
│   │   └── DataStore.h
│   ├── ThreadPool/
│   │   ├── ThreadPool.cpp
│   │   └── ThreadPool.h
│   ├── View/
│   │   ├── ResponseFormatter.cpp
│   │   └── ResponseFormatter.h
│   ├── Server.cpp
│   └── Server.h
```


* **`CMDB/`:** Содержит реализацию основной логики CMDB, включая классы для представления CI (`CI`), связей (`Relationship`) и самой базы данных (`CMDB`).
* **`Server/`:** Включает компоненты HTTP-сервера:
    * **`Controller/`:** Содержит `RequestHandler`, который обрабатывает входящие HTTP-запросы, разбирает их и вызывает соответствующие методы DataStore.
    * **`Model/`:** Содержит `DataStore`, который выступает посредником между HTTP-сервером и CMDB, предоставляя API для взаимодействия с данными CMDB.
    * **`ThreadPool/`:** Реализация пула потоков для обработки входящих соединений.
    * **`View/`:** Содержит `ResponseFormatter` для формирования HTTP-ответов в формате JSON.
    * **`Server.cpp` и `Server.h`:** Основной класс сервера, отвечающий за прием соединений и распределение задач в пул потоков.
* **`main.cpp`:** Точка входа приложения, отвечает за парсинг аргументов командной строки и запуск HTTP-сервера.
* **`README.md`:** Текущий файл с описанием проекта.

## Зависимости

Для сборки и работы данного проекта требуются следующие библиотеки:

* **Boost.Asio:** Для асинхронной обработки сетевых операций.
* **Boost.Beast:** Для построения HTTP-сервера.
* **Boost.JSON:** Для работы с данными в формате JSON.
* **Boost.Program\_options:** Для парсинга аргументов командной строки.
* Стандартная библиотека C++17 или выше.

Убедитесь, что у вас установлены необходимые библиотеки Boost.

## Сборка проекта

Для сборки проекта рекомендуется использовать систему сборки CMake.

1.  Создайте директорию `build`:
    ```bash
    mkdir build
    cd build
    ```
2.  Сконфигурируйте проект с помощью CMake (убедитесь, что CMake установлен и Boost найден):
    ```bash
    cmake ..
    ```
3.  Соберите проект:
    ```bash
    make
    ```

После успешной сборки в директории `build` появится исполняемый файл (например, `cmdb_server`).

## Запуск сервера

Доступные опции командной строки:

-h или --help: Вывести справку по доступным опциям.
-p <номер_порта> или --port <номер_порта>: Указать порт для запуска сервера (по умолчанию: 8080).
-t <число_потоков> или --threads <число_потоков>: Указать количество рабочих потоков (по умолчанию: количество_процессоров * 2).
-d <путь_к_файлу_БД> или --db <путь_к_файлу_БД>: Указать путь к файлу базы данных CMDB (по умолчанию: cmdb.bin).

Пример запуска сервера на порту 9000 с 4 потоками и файлом БД my_cmdb.dat:


```bash
./cmdb_server -p 9000 -t 4 -d my_cmdb.dat
```


